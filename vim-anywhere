#!/usr/bin/env bash

function usage {
    echo "Must give either 'vim', 'nvim', or 'gvim' followed by default terminal if using vim or nvim."
}

if [[ $1 == "-h" ]] || [[ $1 == "--help" ]]; then
    usage
    exit 0
fi

vim=$1
terminal=$2

if [[ $vim != "vim" ]] && [[ $vim != "nvim" ]] && [[ $vim != "gvim" ]]; then
    usage
    exit 1
elif [[ $vim != "gvim" ]] && [[ $terminal == "" ]]; then
    usage
    exit 1
fi

function setclip {
    xclip -selection c
}

function getclip {
    xclip -selection clipboard -o
}

file=$(mktemp)
if [[ $vim == 'gvim' ]]; then
    $vim "$file"
else
    $terminal -e "$vim $file"
fi

cat $file | setclip
rm $file

xdotool key ctrl+shift+v
